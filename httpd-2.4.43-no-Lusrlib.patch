diff -up httpd-2.4.43/acinclude.m4.Lusrlib~ httpd-2.4.43/acinclude.m4
--- httpd-2.4.43/acinclude.m4.Lusrlib~	2020-05-29 16:53:21.295661279 +0200
+++ httpd-2.4.43/acinclude.m4	2020-05-29 16:53:21.295661279 +0200
@@ -515,14 +515,6 @@ AC_DEFUN([APACHE_CHECK_OPENSSL],[
 
     dnl Before doing anything else, load in pkg-config variables
     if test -n "$PKGCONFIG"; then
-      saved_PKG_CONFIG_PATH="$PKG_CONFIG_PATH"
-      if test "x$ap_openssl_base" != "x" -a \
-              -f "${ap_openssl_base}/lib/pkgconfig/openssl.pc"; then
-        dnl Ensure that the given path is used by pkg-config too, otherwise
-        dnl the system openssl.pc might be picked up instead.
-        PKG_CONFIG_PATH="${ap_openssl_base}/lib/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-        export PKG_CONFIG_PATH
-      fi
       AC_ARG_ENABLE(ssl-staticlib-deps,APACHE_HELP_STRING(--enable-ssl-staticlib-deps,[link mod_ssl with dependencies of OpenSSL's static libraries (as indicated by "pkg-config --static"). Must be specified in addition to --enable-ssl.]), [
         if test "$enableval" = "yes"; then
           PKGCONFIG_LIBOPTS="--static"
@@ -542,7 +534,6 @@ AC_DEFUN([APACHE_CHECK_OPENSSL],[
         APR_ADDTO(LDFLAGS, [$pkglookup])
         APR_ADDTO(MOD_LDFLAGS, [$pkglookup])
       fi
-      PKG_CONFIG_PATH="$saved_PKG_CONFIG_PATH"
     fi
 
     dnl fall back to the user-supplied directory if not found via pkg-config
@@ -550,12 +541,6 @@ AC_DEFUN([APACHE_CHECK_OPENSSL],[
       APR_ADDTO(CPPFLAGS, [-I$ap_openssl_base/include])
       APR_ADDTO(MOD_CFLAGS, [-I$ap_openssl_base/include])
       APR_ADDTO(ab_CFLAGS, [-I$ap_openssl_base/include])
-      APR_ADDTO(LDFLAGS, [-L$ap_openssl_base/lib])
-      APR_ADDTO(MOD_LDFLAGS, [-L$ap_openssl_base/lib])
-      if test "x$ap_platform_runtime_link_flag" != "x"; then
-        APR_ADDTO(LDFLAGS, [$ap_platform_runtime_link_flag$ap_openssl_base/lib])
-        APR_ADDTO(MOD_LDFLAGS, [$ap_platform_runtime_link_flag$ap_openssl_base/lib])
-      fi
     fi
 
     AC_MSG_CHECKING([for OpenSSL version >= 0.9.8a])
diff -up httpd-2.4.43/configure.Lusrlib~ httpd-2.4.43/configure
--- httpd-2.4.43/configure.Lusrlib~	2020-05-29 16:53:21.705665625 +0200
+++ httpd-2.4.43/configure	2020-05-29 16:59:35.245624303 +0200
@@ -869,13 +869,6 @@ SHLTCFLAGS
 PCRE_LIBS
 PCRE_CONFIG
 CPP
-OBJEXT
-EXEEXT
-ac_ct_CC
-CPPFLAGS
-LDFLAGS
-CFLAGS
-CC
 target_os
 target_vendor
 target_cpu
@@ -928,6 +921,16 @@ rel_bindir
 exp_bindir
 rel_exec_prefix
 exp_exec_prefix
+LEXLIB
+OBJEXT
+EXEEXT
+ac_ct_CC
+CPPFLAGS
+LDFLAGS
+CFLAGS
+CC
+LEX_OUTPUT_ROOT
+LEX
 target_alias
 host_alias
 build_alias
@@ -947,7 +950,6 @@ infodir
 docdir
 oldincludedir
 includedir
-runstatedir
 localstatedir
 sharedstatedir
 sysconfdir
@@ -1208,7 +1210,6 @@ datadir='${datarootdir}'
 sysconfdir='${prefix}/etc'
 sharedstatedir='${prefix}/com'
 localstatedir='${prefix}/var'
-runstatedir='${localstatedir}/run'
 includedir='${prefix}/include'
 oldincludedir='/usr/include'
 docdir='${datarootdir}/doc/${PACKAGE}'
@@ -1461,15 +1462,6 @@ do
   | -silent | --silent | --silen | --sile | --sil)
     silent=yes ;;
 
-  -runstatedir | --runstatedir | --runstatedi | --runstated \
-  | --runstate | --runstat | --runsta | --runst | --runs \
-  | --run | --ru | --r)
-    ac_prev=runstatedir ;;
-  -runstatedir=* | --runstatedir=* | --runstatedi=* | --runstated=* \
-  | --runstate=* | --runstat=* | --runsta=* | --runst=* | --runs=* \
-  | --run=* | --ru=* | --r=*)
-    runstatedir=$ac_optarg ;;
-
   -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
     ac_prev=sbindir ;;
   -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
@@ -1607,7 +1599,7 @@ fi
 for ac_var in	exec_prefix prefix bindir sbindir libexecdir datarootdir \
 		datadir sysconfdir sharedstatedir localstatedir includedir \
 		oldincludedir docdir infodir htmldir dvidir pdfdir psdir \
-		libdir localedir mandir runstatedir
+		libdir localedir mandir
 do
   eval ac_val=\$$ac_var
   # Remove trailing slashes.
@@ -1760,7 +1752,6 @@ Fine tuning of the installation director
   --sysconfdir=DIR        read-only single-machine data [PREFIX/etc]
   --sharedstatedir=DIR    modifiable architecture-independent data [PREFIX/com]
   --localstatedir=DIR     modifiable single-machine data [PREFIX/var]
-  --runstatedir=DIR       modifiable per-process data [LOCALSTATEDIR/run]
   --libdir=DIR            object code libraries [EPREFIX/lib]
   --includedir=DIR        C header files [PREFIX/include]
   --oldincludedir=DIR     C header files for non-gcc [/usr/include]
@@ -2203,6 +2194,52 @@ fi
 
 } # ac_fn_c_try_compile
 
+# ac_fn_c_try_link LINENO
+# -----------------------
+# Try to link conftest.$ac_ext, and return whether this succeeded.
+ac_fn_c_try_link ()
+{
+  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+  rm -f conftest.$ac_objext conftest$ac_exeext
+  if { { ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+$as_echo "$ac_try_echo"; } >&5
+  (eval "$ac_link") 2>conftest.err
+  ac_status=$?
+  if test -s conftest.err; then
+    grep -v '^ *+' conftest.err >conftest.er1
+    cat conftest.er1 >&5
+    mv -f conftest.er1 conftest.err
+  fi
+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext && {
+	 test "$cross_compiling" = yes ||
+	 test -x conftest$ac_exeext
+       }; then :
+  ac_retval=0
+else
+  $as_echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_retval=1
+fi
+  # Delete the IPA/IPO (Inter Procedural Analysis/Optimization) information
+  # created by the PGI compiler (conftest_ipa8_conftest.oo), as it would
+  # interfere with the next link command; also delete a directory that is
+  # left behind by Apple's compiler.  We do this before executing the actions.
+  rm -rf conftest.dSYM conftest_ipa8_conftest.oo
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
+
+} # ac_fn_c_try_link
+
 # ac_fn_c_try_cpp LINENO
 # ----------------------
 # Try to preprocess conftest.$ac_ext, and return whether this succeeded.
@@ -2400,52 +2437,6 @@ $as_echo "$ac_res" >&6; }
 
 } # ac_fn_c_check_header_compile
 
-# ac_fn_c_try_link LINENO
-# -----------------------
-# Try to link conftest.$ac_ext, and return whether this succeeded.
-ac_fn_c_try_link ()
-{
-  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  rm -f conftest.$ac_objext conftest$ac_exeext
-  if { { ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
-  (eval "$ac_link") 2>conftest.err
-  ac_status=$?
-  if test -s conftest.err; then
-    grep -v '^ *+' conftest.err >conftest.er1
-    cat conftest.er1 >&5
-    mv -f conftest.er1 conftest.err
-  fi
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext && {
-	 test "$cross_compiling" = yes ||
-	 test -x conftest$ac_exeext
-       }; then :
-  ac_retval=0
-else
-  $as_echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_retval=1
-fi
-  # Delete the IPA/IPO (Inter Procedural Analysis/Optimization) information
-  # created by the PGI compiler (conftest_ipa8_conftest.oo), as it would
-  # interfere with the next link command; also delete a directory that is
-  # left behind by Apple's compiler.  We do this before executing the actions.
-  rm -rf conftest.dSYM conftest_ipa8_conftest.oo
-  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
-  as_fn_set_status $ac_retval
-
-} # ac_fn_c_try_link
-
 # ac_fn_c_check_func LINENO FUNC VAR
 # ----------------------------------
 # Tests whether FUNC exists, setting the cache variable VAR accordingly
@@ -2942,6 +2933,1143 @@ ac_config_sub="$SHELL $ac_aux_dir/config
 ac_configure="$SHELL $ac_aux_dir/configure"  # Please don't use this var.
 
 
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
+set dummy ${ac_tool_prefix}cc; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if ${ac_cv_prog_CC+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="${ac_tool_prefix}cc"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+$as_echo "$CC" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "cc", so it can be a program name with args.
+set dummy cc; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if ${ac_cv_prog_ac_ct_CC+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="cc"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+$as_echo "$ac_ct_CC" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+  if test "x$ac_ct_CC" = x; then
+    CC=""
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ac_tool_warned=yes ;;
+esac
+    CC=$ac_ct_CC
+  fi
+else
+  CC="$ac_cv_prog_CC"
+fi
+
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}clang", so it can be a program name with args.
+set dummy ${ac_tool_prefix}clang; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if ${ac_cv_prog_CC+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="${ac_tool_prefix}clang"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+$as_echo "$CC" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "clang", so it can be a program name with args.
+set dummy clang; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if ${ac_cv_prog_ac_ct_CC+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="clang"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+$as_echo "$ac_ct_CC" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+  if test "x$ac_ct_CC" = x; then
+    CC=""
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ac_tool_warned=yes ;;
+esac
+    CC=$ac_ct_CC
+  fi
+else
+  CC="$ac_cv_prog_CC"
+fi
+
+fi
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
+set dummy ${ac_tool_prefix}gcc; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if ${ac_cv_prog_CC+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="${ac_tool_prefix}gcc"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+$as_echo "$CC" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "gcc", so it can be a program name with args.
+set dummy gcc; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if ${ac_cv_prog_ac_ct_CC+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="gcc"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+$as_echo "$ac_ct_CC" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+  if test "x$ac_ct_CC" = x; then
+    CC=""
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ac_tool_warned=yes ;;
+esac
+    CC=$ac_ct_CC
+  fi
+else
+  CC="$ac_cv_prog_CC"
+fi
+
+fi
+if test -z "$CC"; then
+          if test -n "$ac_tool_prefix"; then
+    # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
+set dummy ${ac_tool_prefix}cc; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if ${ac_cv_prog_CC+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="${ac_tool_prefix}cc"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+$as_echo "$CC" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+
+  fi
+fi
+if test -z "$CC"; then
+  # Extract the first word of "cc", so it can be a program name with args.
+set dummy cc; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if ${ac_cv_prog_CC+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+  ac_prog_rejected=no
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
+       ac_prog_rejected=yes
+       continue
+     fi
+    ac_cv_prog_CC="cc"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+if test $ac_prog_rejected = yes; then
+  # We found a bogon in the path, so make sure we never use it.
+  set dummy $ac_cv_prog_CC
+  shift
+  if test $# != 0; then
+    # We chose a different compiler from the bogus one.
+    # However, it has the same basename, so the bogon will be chosen
+    # first if we set CC to just the basename; use the full file name.
+    shift
+    ac_cv_prog_CC="$as_dir/$ac_word${1+' '}$@"
+  fi
+fi
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+$as_echo "$CC" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+
+fi
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  for ac_prog in cl.exe
+  do
+    # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if ${ac_cv_prog_CC+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+$as_echo "$CC" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+
+    test -n "$CC" && break
+  done
+fi
+if test -z "$CC"; then
+  ac_ct_CC=$CC
+  for ac_prog in cl.exe
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if ${ac_cv_prog_ac_ct_CC+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="$ac_prog"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+$as_echo "$ac_ct_CC" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+
+  test -n "$ac_ct_CC" && break
+done
+
+  if test "x$ac_ct_CC" = x; then
+    CC=""
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ac_tool_warned=yes ;;
+esac
+    CC=$ac_ct_CC
+  fi
+fi
+
+fi
+
+
+test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "no acceptable C compiler found in \$PATH
+See \`config.log' for more details" "$LINENO" 5; }
+
+# Provide some information about the compiler.
+$as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
+set X $ac_compile
+ac_compiler=$2
+for ac_option in --version -v -V -qversion; do
+  { { ac_try="$ac_compiler $ac_option >&5"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+$as_echo "$ac_try_echo"; } >&5
+  (eval "$ac_compiler $ac_option >&5") 2>conftest.err
+  ac_status=$?
+  if test -s conftest.err; then
+    sed '10a\
+... rest of stderr output deleted ...
+         10q' conftest.err >conftest.er1
+    cat conftest.er1 >&5
+  fi
+  rm -f conftest.er1 conftest.err
+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+done
+
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+ac_clean_files_save=$ac_clean_files
+ac_clean_files="$ac_clean_files a.out a.out.dSYM a.exe b.out"
+# Try to create an executable without -o first, disregard a.out.
+# It will help us diagnose broken compilers, and finding out an intuition
+# of exeext.
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the C compiler works" >&5
+$as_echo_n "checking whether the C compiler works... " >&6; }
+ac_link_default=`$as_echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
+
+# The possible output files:
+ac_files="a.out conftest.exe conftest a.exe a_out.exe b.out conftest.*"
+
+ac_rmfiles=
+for ac_file in $ac_files
+do
+  case $ac_file in
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj ) ;;
+    * ) ac_rmfiles="$ac_rmfiles $ac_file";;
+  esac
+done
+rm -f $ac_rmfiles
+
+if { { ac_try="$ac_link_default"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+$as_echo "$ac_try_echo"; } >&5
+  (eval "$ac_link_default") 2>&5
+  ac_status=$?
+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }; then :
+  # Autoconf-2.13 could set the ac_cv_exeext variable to `no'.
+# So ignore a value of `no', otherwise this would lead to `EXEEXT = no'
+# in a Makefile.  We should not override ac_cv_exeext if it was cached,
+# so that the user can short-circuit this test for compilers unknown to
+# Autoconf.
+for ac_file in $ac_files ''
+do
+  test -f "$ac_file" || continue
+  case $ac_file in
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj )
+	;;
+    [ab].out )
+	# We found the default executable, but exeext='' is most
+	# certainly right.
+	break;;
+    *.* )
+	if test "${ac_cv_exeext+set}" = set && test "$ac_cv_exeext" != no;
+	then :; else
+	   ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
+	fi
+	# We set ac_cv_exeext here because the later test for it is not
+	# safe: cross compilers may not add the suffix if given an `-o'
+	# argument, so we may need to know it at that point already.
+	# Even if this section looks crufty: it has the advantage of
+	# actually working.
+	break;;
+    * )
+	break;;
+  esac
+done
+test "$ac_cv_exeext" = no && ac_cv_exeext=
+
+else
+  ac_file=''
+fi
+if test -z "$ac_file"; then :
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+$as_echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error 77 "C compiler cannot create executables
+See \`config.log' for more details" "$LINENO" 5; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+$as_echo "yes" >&6; }
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler default output file name" >&5
+$as_echo_n "checking for C compiler default output file name... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_file" >&5
+$as_echo "$ac_file" >&6; }
+ac_exeext=$ac_cv_exeext
+
+rm -f -r a.out a.out.dSYM a.exe conftest$ac_cv_exeext b.out
+ac_clean_files=$ac_clean_files_save
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of executables" >&5
+$as_echo_n "checking for suffix of executables... " >&6; }
+if { { ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+$as_echo "$ac_try_echo"; } >&5
+  (eval "$ac_link") 2>&5
+  ac_status=$?
+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }; then :
+  # If both `conftest.exe' and `conftest' are `present' (well, observable)
+# catch `conftest.exe'.  For instance with Cygwin, `ls conftest' will
+# work properly (i.e., refer to `conftest.exe'), while it won't with
+# `rm'.
+for ac_file in conftest.exe conftest conftest.*; do
+  test -f "$ac_file" || continue
+  case $ac_file in
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj ) ;;
+    *.* ) ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
+	  break;;
+    * ) break;;
+  esac
+done
+else
+  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "cannot compute suffix of executables: cannot compile and link
+See \`config.log' for more details" "$LINENO" 5; }
+fi
+rm -f conftest conftest$ac_cv_exeext
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
+$as_echo "$ac_cv_exeext" >&6; }
+
+rm -f conftest.$ac_ext
+EXEEXT=$ac_cv_exeext
+ac_exeext=$EXEEXT
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+#include <stdio.h>
+int
+main ()
+{
+FILE *f = fopen ("conftest.out", "w");
+ return ferror (f) || fclose (f) != 0;
+
+  ;
+  return 0;
+}
+_ACEOF
+ac_clean_files="$ac_clean_files conftest.out"
+# Check that the compiler produces executables we can run.  If not, either
+# the compiler is broken, or we cross compile.
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are cross compiling" >&5
+$as_echo_n "checking whether we are cross compiling... " >&6; }
+if test "$cross_compiling" != yes; then
+  { { ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+$as_echo "$ac_try_echo"; } >&5
+  (eval "$ac_link") 2>&5
+  ac_status=$?
+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+  if { ac_try='./conftest$ac_cv_exeext'
+  { { case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+$as_echo "$ac_try_echo"; } >&5
+  (eval "$ac_try") 2>&5
+  ac_status=$?
+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }; }; then
+    cross_compiling=no
+  else
+    if test "$cross_compiling" = maybe; then
+	cross_compiling=yes
+    else
+	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "cannot run C compiled programs.
+If you meant to cross compile, use \`--host'.
+See \`config.log' for more details" "$LINENO" 5; }
+    fi
+  fi
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
+$as_echo "$cross_compiling" >&6; }
+
+rm -f conftest.$ac_ext conftest$ac_cv_exeext conftest.out
+ac_clean_files=$ac_clean_files_save
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of object files" >&5
+$as_echo_n "checking for suffix of object files... " >&6; }
+if ${ac_cv_objext+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.o conftest.obj
+if { { ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+$as_echo "$ac_try_echo"; } >&5
+  (eval "$ac_compile") 2>&5
+  ac_status=$?
+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }; then :
+  for ac_file in conftest.o conftest.obj conftest.*; do
+  test -f "$ac_file" || continue;
+  case $ac_file in
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM ) ;;
+    *) ac_cv_objext=`expr "$ac_file" : '.*\.\(.*\)'`
+       break;;
+  esac
+done
+else
+  $as_echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "cannot compute suffix of object files: cannot compile
+See \`config.log' for more details" "$LINENO" 5; }
+fi
+rm -f conftest.$ac_cv_objext conftest.$ac_ext
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_objext" >&5
+$as_echo "$ac_cv_objext" >&6; }
+OBJEXT=$ac_cv_objext
+ac_objext=$OBJEXT
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C compiler" >&5
+$as_echo_n "checking whether we are using the GNU C compiler... " >&6; }
+if ${ac_cv_c_compiler_gnu+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+int
+main ()
+{
+#ifndef __GNUC__
+       choke me
+#endif
+
+  ;
+  return 0;
+}
+_ACEOF
+if ac_fn_c_try_compile "$LINENO"; then :
+  ac_compiler_gnu=yes
+else
+  ac_compiler_gnu=no
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+ac_cv_c_compiler_gnu=$ac_compiler_gnu
+
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_compiler_gnu" >&5
+$as_echo "$ac_cv_c_compiler_gnu" >&6; }
+if test $ac_compiler_gnu = yes; then
+  GCC=yes
+else
+  GCC=
+fi
+ac_test_CFLAGS=${CFLAGS+set}
+ac_save_CFLAGS=$CFLAGS
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
+$as_echo_n "checking whether $CC accepts -g... " >&6; }
+if ${ac_cv_prog_cc_g+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  ac_save_c_werror_flag=$ac_c_werror_flag
+   ac_c_werror_flag=yes
+   ac_cv_prog_cc_g=no
+   CFLAGS="-g"
+   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+if ac_fn_c_try_compile "$LINENO"; then :
+  ac_cv_prog_cc_g=yes
+else
+  CFLAGS=""
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+if ac_fn_c_try_compile "$LINENO"; then :
+
+else
+  ac_c_werror_flag=$ac_save_c_werror_flag
+	 CFLAGS="-g"
+	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+if ac_fn_c_try_compile "$LINENO"; then :
+  ac_cv_prog_cc_g=yes
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+   ac_c_werror_flag=$ac_save_c_werror_flag
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_g" >&5
+$as_echo "$ac_cv_prog_cc_g" >&6; }
+if test "$ac_test_CFLAGS" = set; then
+  CFLAGS=$ac_save_CFLAGS
+elif test $ac_cv_prog_cc_g = yes; then
+  if test "$GCC" = yes; then
+    CFLAGS="-g -O2"
+  else
+    CFLAGS="-g"
+  fi
+else
+  if test "$GCC" = yes; then
+    CFLAGS="-O2"
+  else
+    CFLAGS=
+  fi
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C89" >&5
+$as_echo_n "checking for $CC option to accept ISO C89... " >&6; }
+if ${ac_cv_prog_cc_c89+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  ac_cv_prog_cc_c89=no
+ac_save_CC=$CC
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+#include <stdarg.h>
+#include <stdio.h>
+struct stat;
+/* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
+struct buf { int x; };
+FILE * (*rcsopen) (struct buf *, struct stat *, int);
+static char *e (p, i)
+     char **p;
+     int i;
+{
+  return p[i];
+}
+static char *f (char * (*g) (char **, int), char **p, ...)
+{
+  char *s;
+  va_list v;
+  va_start (v,p);
+  s = g (p, va_arg (v,int));
+  va_end (v);
+  return s;
+}
+
+/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has
+   function prototypes and stuff, but not '\xHH' hex character constants.
+   These don't provoke an error unfortunately, instead are silently treated
+   as 'x'.  The following induces an error, until -std is added to get
+   proper ANSI mode.  Curiously '\x00'!='x' always comes out true, for an
+   array size at least.  It's necessary to write '\x00'==0 to get something
+   that's true only with -std.  */
+int osf4_cc_array ['\x00' == 0 ? 1 : -1];
+
+/* IBM C 6 for AIX is almost-ANSI by default, but it replaces macro parameters
+   inside strings and character constants.  */
+#define FOO(x) 'x'
+int xlc6_cc_array[FOO(a) == 'x' ? 1 : -1];
+
+int test (int i, double x);
+struct s1 {int (*f) (int a);};
+struct s2 {int (*f) (double a);};
+int pairnames (int, char **, FILE *(*)(struct buf *, struct stat *, int), int, int);
+int argc;
+char **argv;
+int
+main ()
+{
+return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];
+  ;
+  return 0;
+}
+_ACEOF
+for ac_arg in '' -qlanglvl=extc89 -qlanglvl=ansi -std \
+	-Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
+do
+  CC="$ac_save_CC $ac_arg"
+  if ac_fn_c_try_compile "$LINENO"; then :
+  ac_cv_prog_cc_c89=$ac_arg
+fi
+rm -f core conftest.err conftest.$ac_objext
+  test "x$ac_cv_prog_cc_c89" != "xno" && break
+done
+rm -f conftest.$ac_ext
+CC=$ac_save_CC
+
+fi
+# AC_CACHE_VAL
+case "x$ac_cv_prog_cc_c89" in
+  x)
+    { $as_echo "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
+$as_echo "none needed" >&6; } ;;
+  xno)
+    { $as_echo "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
+$as_echo "unsupported" >&6; } ;;
+  *)
+    CC="$CC $ac_cv_prog_cc_c89"
+    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c89" >&5
+$as_echo "$ac_cv_prog_cc_c89" >&6; } ;;
+esac
+if test "x$ac_cv_prog_cc_c89" != xno; then :
+
+fi
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+
+for ac_prog in flex lex
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if ${ac_cv_prog_LEX+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  if test -n "$LEX"; then
+  ac_cv_prog_LEX="$LEX" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_LEX="$ac_prog"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+LEX=$ac_cv_prog_LEX
+if test -n "$LEX"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LEX" >&5
+$as_echo "$LEX" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+
+  test -n "$LEX" && break
+done
+test -n "$LEX" || LEX=":"
+
+if test "x$LEX" != "x:"; then
+  cat >conftest.l <<_ACEOF
+%%
+a { ECHO; }
+b { REJECT; }
+c { yymore (); }
+d { yyless (1); }
+e { /* IRIX 6.5 flex 2.5.4 underquotes its yyless argument.  */
+    yyless ((input () != 0)); }
+f { unput (yytext[0]); }
+. { BEGIN INITIAL; }
+%%
+#ifdef YYTEXT_POINTER
+extern char *yytext;
+#endif
+int
+main (void)
+{
+  return ! yylex () + ! yywrap ();
+}
+_ACEOF
+{ { ac_try="$LEX conftest.l"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+$as_echo "$ac_try_echo"; } >&5
+  (eval "$LEX conftest.l") 2>&5
+  ac_status=$?
+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking lex output file root" >&5
+$as_echo_n "checking lex output file root... " >&6; }
+if ${ac_cv_prog_lex_root+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+
+if test -f lex.yy.c; then
+  ac_cv_prog_lex_root=lex.yy
+elif test -f lexyy.c; then
+  ac_cv_prog_lex_root=lexyy
+else
+  as_fn_error $? "cannot find output from $LEX; giving up" "$LINENO" 5
+fi
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_lex_root" >&5
+$as_echo "$ac_cv_prog_lex_root" >&6; }
+LEX_OUTPUT_ROOT=$ac_cv_prog_lex_root
+
+if test -z "${LEXLIB+set}"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: checking lex library" >&5
+$as_echo_n "checking lex library... " >&6; }
+if ${ac_cv_lib_lex+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+
+    ac_save_LIBS=$LIBS
+    ac_cv_lib_lex='none needed'
+    for ac_lib in '' -lfl -ll; do
+      LIBS="$ac_lib $ac_save_LIBS"
+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+`cat $LEX_OUTPUT_ROOT.c`
+_ACEOF
+if ac_fn_c_try_link "$LINENO"; then :
+  ac_cv_lib_lex=$ac_lib
+fi
+rm -f core conftest.err conftest.$ac_objext \
+    conftest$ac_exeext conftest.$ac_ext
+      test "$ac_cv_lib_lex" != 'none needed' && break
+    done
+    LIBS=$ac_save_LIBS
+
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_lex" >&5
+$as_echo "$ac_cv_lib_lex" >&6; }
+  test "$ac_cv_lib_lex" != 'none needed' && LEXLIB=$ac_cv_lib_lex
+fi
+
+
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether yytext is a pointer" >&5
+$as_echo_n "checking whether yytext is a pointer... " >&6; }
+if ${ac_cv_prog_lex_yytext_pointer+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  # POSIX says lex can declare yytext either as a pointer or an array; the
+# default is implementation-dependent.  Figure out which it is, since
+# not all implementations provide the %pointer and %array declarations.
+ac_cv_prog_lex_yytext_pointer=no
+ac_save_LIBS=$LIBS
+LIBS="$LEXLIB $ac_save_LIBS"
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+  #define YYTEXT_POINTER 1
+`cat $LEX_OUTPUT_ROOT.c`
+_ACEOF
+if ac_fn_c_try_link "$LINENO"; then :
+  ac_cv_prog_lex_yytext_pointer=yes
+fi
+rm -f core conftest.err conftest.$ac_objext \
+    conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_save_LIBS
+
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_lex_yytext_pointer" >&5
+$as_echo "$ac_cv_prog_lex_yytext_pointer" >&6; }
+if test $ac_cv_prog_lex_yytext_pointer = yes; then
+
+$as_echo "#define YYTEXT_POINTER 1" >>confdefs.h
+
+fi
+rm -f conftest.l $LEX_OUTPUT_ROOT.c
+
+fi
 
 abs_srcdir=`(cd $srcdir && pwd)`
 abs_builddir=`pwd`
@@ -5020,6 +6148,193 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS con
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
+set dummy ${ac_tool_prefix}cc; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if ${ac_cv_prog_CC+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="${ac_tool_prefix}cc"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+$as_echo "$CC" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "cc", so it can be a program name with args.
+set dummy cc; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if ${ac_cv_prog_ac_ct_CC+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="cc"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+$as_echo "$ac_ct_CC" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+  if test "x$ac_ct_CC" = x; then
+    CC=""
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ac_tool_warned=yes ;;
+esac
+    CC=$ac_ct_CC
+  fi
+else
+  CC="$ac_cv_prog_CC"
+fi
+
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}clang", so it can be a program name with args.
+set dummy ${ac_tool_prefix}clang; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if ${ac_cv_prog_CC+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="${ac_tool_prefix}clang"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+$as_echo "$CC" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "clang", so it can be a program name with args.
+set dummy clang; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if ${ac_cv_prog_ac_ct_CC+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="clang"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+$as_echo "$ac_ct_CC" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+  if test "x$ac_ct_CC" = x; then
+    CC=""
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ac_tool_warned=yes ;;
+esac
+    CC=$ac_ct_CC
+  fi
+else
+  CC="$ac_cv_prog_CC"
+fi
+
+fi
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
 set dummy ${ac_tool_prefix}gcc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
@@ -5111,6 +6426,7 @@ else
   CC="$ac_cv_prog_CC"
 fi
 
+fi
 if test -z "$CC"; then
           if test -n "$ac_tool_prefix"; then
     # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
@@ -5342,256 +6658,6 @@ $as_echo "$ac_try_echo"; } >&5
   test $ac_status = 0; }
 done
 
-cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-ac_clean_files_save=$ac_clean_files
-ac_clean_files="$ac_clean_files a.out a.out.dSYM a.exe b.out"
-# Try to create an executable without -o first, disregard a.out.
-# It will help us diagnose broken compilers, and finding out an intuition
-# of exeext.
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the C compiler works" >&5
-$as_echo_n "checking whether the C compiler works... " >&6; }
-ac_link_default=`$as_echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
-
-# The possible output files:
-ac_files="a.out conftest.exe conftest a.exe a_out.exe b.out conftest.*"
-
-ac_rmfiles=
-for ac_file in $ac_files
-do
-  case $ac_file in
-    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj ) ;;
-    * ) ac_rmfiles="$ac_rmfiles $ac_file";;
-  esac
-done
-rm -f $ac_rmfiles
-
-if { { ac_try="$ac_link_default"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
-  (eval "$ac_link_default") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; then :
-  # Autoconf-2.13 could set the ac_cv_exeext variable to `no'.
-# So ignore a value of `no', otherwise this would lead to `EXEEXT = no'
-# in a Makefile.  We should not override ac_cv_exeext if it was cached,
-# so that the user can short-circuit this test for compilers unknown to
-# Autoconf.
-for ac_file in $ac_files ''
-do
-  test -f "$ac_file" || continue
-  case $ac_file in
-    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj )
-	;;
-    [ab].out )
-	# We found the default executable, but exeext='' is most
-	# certainly right.
-	break;;
-    *.* )
-	if test "${ac_cv_exeext+set}" = set && test "$ac_cv_exeext" != no;
-	then :; else
-	   ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
-	fi
-	# We set ac_cv_exeext here because the later test for it is not
-	# safe: cross compilers may not add the suffix if given an `-o'
-	# argument, so we may need to know it at that point already.
-	# Even if this section looks crufty: it has the advantage of
-	# actually working.
-	break;;
-    * )
-	break;;
-  esac
-done
-test "$ac_cv_exeext" = no && ac_cv_exeext=
-
-else
-  ac_file=''
-fi
-if test -z "$ac_file"; then :
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-$as_echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error 77 "C compiler cannot create executables
-See \`config.log' for more details" "$LINENO" 5; }
-else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler default output file name" >&5
-$as_echo_n "checking for C compiler default output file name... " >&6; }
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_file" >&5
-$as_echo "$ac_file" >&6; }
-ac_exeext=$ac_cv_exeext
-
-rm -f -r a.out a.out.dSYM a.exe conftest$ac_cv_exeext b.out
-ac_clean_files=$ac_clean_files_save
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of executables" >&5
-$as_echo_n "checking for suffix of executables... " >&6; }
-if { { ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
-  (eval "$ac_link") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; then :
-  # If both `conftest.exe' and `conftest' are `present' (well, observable)
-# catch `conftest.exe'.  For instance with Cygwin, `ls conftest' will
-# work properly (i.e., refer to `conftest.exe'), while it won't with
-# `rm'.
-for ac_file in conftest.exe conftest conftest.*; do
-  test -f "$ac_file" || continue
-  case $ac_file in
-    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj ) ;;
-    *.* ) ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
-	  break;;
-    * ) break;;
-  esac
-done
-else
-  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "cannot compute suffix of executables: cannot compile and link
-See \`config.log' for more details" "$LINENO" 5; }
-fi
-rm -f conftest conftest$ac_cv_exeext
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
-$as_echo "$ac_cv_exeext" >&6; }
-
-rm -f conftest.$ac_ext
-EXEEXT=$ac_cv_exeext
-ac_exeext=$EXEEXT
-cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <stdio.h>
-int
-main ()
-{
-FILE *f = fopen ("conftest.out", "w");
- return ferror (f) || fclose (f) != 0;
-
-  ;
-  return 0;
-}
-_ACEOF
-ac_clean_files="$ac_clean_files conftest.out"
-# Check that the compiler produces executables we can run.  If not, either
-# the compiler is broken, or we cross compile.
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are cross compiling" >&5
-$as_echo_n "checking whether we are cross compiling... " >&6; }
-if test "$cross_compiling" != yes; then
-  { { ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
-  (eval "$ac_link") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }
-  if { ac_try='./conftest$ac_cv_exeext'
-  { { case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
-  (eval "$ac_try") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; }; then
-    cross_compiling=no
-  else
-    if test "$cross_compiling" = maybe; then
-	cross_compiling=yes
-    else
-	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "cannot run C compiled programs.
-If you meant to cross compile, use \`--host'.
-See \`config.log' for more details" "$LINENO" 5; }
-    fi
-  fi
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
-$as_echo "$cross_compiling" >&6; }
-
-rm -f conftest.$ac_ext conftest$ac_cv_exeext conftest.out
-ac_clean_files=$ac_clean_files_save
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of object files" >&5
-$as_echo_n "checking for suffix of object files... " >&6; }
-if ${ac_cv_objext+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.o conftest.obj
-if { { ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
-  (eval "$ac_compile") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; then :
-  for ac_file in conftest.o conftest.obj conftest.*; do
-  test -f "$ac_file" || continue;
-  case $ac_file in
-    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM ) ;;
-    *) ac_cv_objext=`expr "$ac_file" : '.*\.\(.*\)'`
-       break;;
-  esac
-done
-else
-  $as_echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "cannot compute suffix of object files: cannot compile
-See \`config.log' for more details" "$LINENO" 5; }
-fi
-rm -f conftest.$ac_cv_objext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_objext" >&5
-$as_echo "$ac_cv_objext" >&6; }
-OBJEXT=$ac_cv_objext
-ac_objext=$OBJEXT
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C compiler" >&5
 $as_echo_n "checking whether we are using the GNU C compiler... " >&6; }
 if ${ac_cv_c_compiler_gnu+:} false; then :
@@ -6450,17 +7516,10 @@ case $host in
 
       ;;
   *-linux-*)
-      case `uname -r` in
-        # Unserialized accept() was not recommended until Linux 2.2.
-        [01].* | 2.[01]* )
-            ;;
-        * )
 
   test "x$silent" != "xyes" && echo "  forcing SINGLE_LISTEN_UNSERIALIZED_ACCEPT to \"1\""
   SINGLE_LISTEN_UNSERIALIZED_ACCEPT="1"
 
-            ;;
-      esac
       ;;
   *486-*-bsdi* | *-netbsd* | *-freebsd* | *-apple-darwin* | *-dec-osf* | *-qnx)
 
@@ -6875,7 +7934,6 @@ INSTALL="\$(LIBTOOL) --mode=install \$(a
 
 
 
-
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
 $as_echo_n "checking for ANSI C header files... " >&6; }
 if ${ac_cv_header_stdc+:} false; then :
@@ -9792,7 +10850,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHN_FILE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTHN_FILE_LDADD)
 EOF
     fi
   fi
@@ -9933,7 +10991,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHN_DBM_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTHN_DBM_LDADD)
 EOF
     fi
   fi
@@ -10074,7 +11132,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHN_ANON_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTHN_ANON_LDADD)
 EOF
     fi
   fi
@@ -10215,7 +11273,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHN_DBD_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTHN_DBD_LDADD)
 EOF
     fi
   fi
@@ -10356,7 +11414,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHN_SOCACHE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTHN_SOCACHE_LDADD)
 EOF
     fi
   fi
@@ -10498,7 +11556,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHN_CORE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTHN_CORE_LDADD)
 EOF
     fi
   fi
@@ -10640,7 +11698,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHZ_HOST_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTHZ_HOST_LDADD)
 EOF
     fi
   fi
@@ -10781,7 +11839,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHZ_GROUPFILE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTHZ_GROUPFILE_LDADD)
 EOF
     fi
   fi
@@ -10922,7 +11980,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHZ_USER_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTHZ_USER_LDADD)
 EOF
     fi
   fi
@@ -11063,7 +12121,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHZ_DBM_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTHZ_DBM_LDADD)
 EOF
     fi
   fi
@@ -11204,7 +12262,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHZ_OWNER_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTHZ_OWNER_LDADD)
 EOF
     fi
   fi
@@ -11345,7 +12403,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHZ_DBD_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTHZ_DBD_LDADD)
 EOF
     fi
   fi
@@ -11487,7 +12545,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHZ_CORE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTHZ_CORE_LDADD)
 EOF
     fi
   fi
@@ -11708,7 +12766,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHNZ_LDAP_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTHNZ_LDAP_LDADD)
 EOF
     fi
   fi
@@ -11850,7 +12908,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHNZ_FCGI_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTHNZ_FCGI_LDADD)
 EOF
     fi
   fi
@@ -11992,7 +13050,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_ACCESS_COMPAT_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_ACCESS_COMPAT_LDADD)
 EOF
     fi
   fi
@@ -12135,7 +13193,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTH_BASIC_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTH_BASIC_LDADD)
 EOF
     fi
   fi
@@ -12276,7 +13334,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTH_FORM_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTH_FORM_LDADD)
 EOF
     fi
   fi
@@ -12458,7 +13516,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTH_DIGEST_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTH_DIGEST_LDADD)
 EOF
     fi
   fi
@@ -12600,7 +13658,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_ALLOWMETHODS_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_ALLOWMETHODS_LDADD)
 EOF
     fi
   fi
@@ -12797,7 +13855,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_ISAPI_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_ISAPI_LDADD)
 EOF
     fi
   fi
@@ -12972,7 +14030,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_FILE_CACHE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_FILE_CACHE_LDADD)
 EOF
     fi
   fi
@@ -13127,7 +14185,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CACHE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_CACHE_LDADD)
 EOF
     fi
   fi
@@ -13289,7 +14347,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CACHE_DISK_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_CACHE_DISK_LDADD)
 EOF
     fi
   fi
@@ -13430,7 +14488,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CACHE_SOCACHE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_CACHE_SOCACHE_LDADD)
 EOF
     fi
   fi
@@ -13574,7 +14632,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SOCACHE_SHMCB_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SOCACHE_SHMCB_LDADD)
 EOF
     fi
   fi
@@ -13715,7 +14773,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SOCACHE_DBM_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SOCACHE_DBM_LDADD)
 EOF
     fi
   fi
@@ -13856,7 +14914,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SOCACHE_MEMCACHE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SOCACHE_MEMCACHE_LDADD)
 EOF
     fi
   fi
@@ -13997,7 +15055,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SOCACHE_REDIS_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SOCACHE_REDIS_LDADD)
 EOF
     fi
   fi
@@ -14149,92 +15207,6 @@ $as_echo "$ap_distcache_base" >&6; }
     done
   fi
 
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"-L$ap_distcache_base/lib\""
-    LDFLAGS="-L$ap_distcache_base/lib"
-  else
-    apr_addto_bugger="-L$ap_distcache_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$ap_distcache_ldflags" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting ap_distcache_ldflags to \"-L$ap_distcache_base/lib\""
-    ap_distcache_ldflags="-L$ap_distcache_base/lib"
-  else
-    apr_addto_bugger="-L$ap_distcache_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $ap_distcache_ldflags; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to ap_distcache_ldflags"
-        ap_distcache_ldflags="$ap_distcache_ldflags $i"
-      fi
-    done
-  fi
-
-    if test "x$ap_platform_runtime_link_flag" != "x"; then
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"$ap_platform_runtime_link_flag$ap_distcache_base/lib\""
-    LDFLAGS="$ap_platform_runtime_link_flag$ap_distcache_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_distcache_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$ap_distcache_ldflags" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting ap_distcache_ldflags to \"$ap_platform_runtime_link_flag$ap_distcache_base/lib\""
-    ap_distcache_ldflags="$ap_platform_runtime_link_flag$ap_distcache_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_distcache_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $ap_distcache_ldflags; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to ap_distcache_ldflags"
-        ap_distcache_ldflags="$ap_distcache_ldflags $i"
-      fi
-    done
-  fi
-
-    fi
   fi
     for ac_header in distcache/dc_client.h
 do :
@@ -14451,7 +15423,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SOCACHE_DC_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SOCACHE_DC_LDADD)
 EOF
     fi
   fi
@@ -14730,7 +15702,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SO_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SO_LDADD)
 EOF
     fi
   fi
@@ -14913,7 +15885,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_WATCHDOG_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_WATCHDOG_LDADD)
 EOF
     fi
   fi
@@ -15055,7 +16027,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_MACRO_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_MACRO_LDADD)
 EOF
     fi
   fi
@@ -15251,7 +16223,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DBD_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_DBD_LDADD)
 EOF
     fi
   fi
@@ -15447,7 +16419,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_BUCKETEER_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_BUCKETEER_LDADD)
 EOF
     fi
   fi
@@ -15588,7 +16560,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DUMPIO_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_DUMPIO_LDADD)
 EOF
     fi
   fi
@@ -15763,7 +16735,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_ECHO_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_ECHO_LDADD)
 EOF
     fi
   fi
@@ -15937,7 +16909,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_EXAMPLE_HOOKS_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_EXAMPLE_HOOKS_LDADD)
 EOF
     fi
   fi
@@ -16078,7 +17050,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CASE_FILTER_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_CASE_FILTER_LDADD)
 EOF
     fi
   fi
@@ -16219,7 +17191,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CASE_FILTER_IN_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_CASE_FILTER_IN_LDADD)
 EOF
     fi
   fi
@@ -16360,7 +17332,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_EXAMPLE_IPC_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_EXAMPLE_IPC_LDADD)
 EOF
     fi
   fi
@@ -16567,7 +17539,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_BUFFER_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_BUFFER_LDADD)
 EOF
     fi
   fi
@@ -16708,7 +17680,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DATA_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_DATA_LDADD)
 EOF
     fi
   fi
@@ -16849,7 +17821,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_RATELIMIT_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_RATELIMIT_LDADD)
 EOF
     fi
   fi
@@ -16990,7 +17962,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_REQTIMEOUT_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_REQTIMEOUT_LDADD)
 EOF
     fi
   fi
@@ -17131,7 +18103,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_EXT_FILTER_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_EXT_FILTER_LDADD)
 EOF
     fi
   fi
@@ -17272,7 +18244,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_REQUEST_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_REQUEST_LDADD)
 EOF
     fi
   fi
@@ -17413,7 +18385,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_INCLUDE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_INCLUDE_LDADD)
 EOF
     fi
   fi
@@ -17554,7 +18526,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_FILTER_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_FILTER_LDADD)
 EOF
     fi
   fi
@@ -17695,7 +18667,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_REFLECTOR_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_REFLECTOR_LDADD)
 EOF
     fi
   fi
@@ -17836,7 +18808,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SUBSTITUTE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SUBSTITUTE_LDADD)
 EOF
     fi
   fi
@@ -18018,7 +18990,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SED_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SED_LDADD)
 EOF
     fi
   fi
@@ -18163,7 +19135,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CHARSET_LITE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_CHARSET_LITE_LDADD)
 EOF
     fi
   fi
@@ -18305,7 +19277,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CHARSET_LITE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_CHARSET_LITE_LDADD)
 EOF
     fi
   fi
@@ -18470,92 +19442,6 @@ $as_echo "$ap_zlib_base" >&6; }
   fi
 
             CPPFLAGS="$CPPFLAGS $INCLUDES"
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"-L${ap_zlib_base}/lib\""
-    LDFLAGS="-L${ap_zlib_base}/lib"
-  else
-    apr_addto_bugger="-L${ap_zlib_base}/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$ap_zlib_ldflags" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting ap_zlib_ldflags to \"-L${ap_zlib_base}/lib\""
-    ap_zlib_ldflags="-L${ap_zlib_base}/lib"
-  else
-    apr_addto_bugger="-L${ap_zlib_base}/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $ap_zlib_ldflags; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to ap_zlib_ldflags"
-        ap_zlib_ldflags="$ap_zlib_ldflags $i"
-      fi
-    done
-  fi
-
-      if test "x$ap_platform_runtime_link_flag" != "x"; then
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"$ap_platform_runtime_link_flag${ap_zlib_base}/lib\""
-    LDFLAGS="$ap_platform_runtime_link_flag${ap_zlib_base}/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag${ap_zlib_base}/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$ap_zlib_ldflags" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting ap_zlib_ldflags to \"$ap_platform_runtime_link_flag${ap_zlib_base}/lib\""
-    ap_zlib_ldflags="$ap_platform_runtime_link_flag${ap_zlib_base}/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag${ap_zlib_base}/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $ap_zlib_ldflags; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to ap_zlib_ldflags"
-        ap_zlib_ldflags="$ap_zlib_ldflags $i"
-      fi
-    done
-  fi
-
-      fi
     fi
 
   if test "x$LIBS" = "x"; then
@@ -18732,7 +19618,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DEFLATE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_DEFLATE_LDADD)
 EOF
     fi
   fi
@@ -18972,7 +19858,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_XML2ENC_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_XML2ENC_LDADD)
 EOF
     fi
   fi
@@ -19210,7 +20096,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_HTML_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PROXY_HTML_LDADD)
 EOF
     fi
   fi
@@ -19342,7 +20228,7 @@ if ac_fn_c_try_compile "$LINENO"; then :
 $as_echo "yes" >&6; }
        ap_brotli_found=yes
        ap_brotli_cflags="-I${ap_brotli_base}/include"
-       ap_brotli_libs="-L${ap_brotli_base}/lib -lbrotlienc -lbrotlicommon"
+       ap_brotli_libs="-lbrotlienc -lbrotlicommon"
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
@@ -19517,7 +20403,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_BROTLI_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_BROTLI_LDADD)
 EOF
     fi
   fi
@@ -19721,7 +20607,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_HTTP_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_HTTP_LDADD)
 EOF
     fi
   fi
@@ -19862,7 +20748,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_MIME_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_MIME_LDADD)
 EOF
     fi
   fi
@@ -20117,7 +21003,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_LDAP_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_LDAP_LDADD)
 EOF
     fi
   fi
@@ -20314,7 +21200,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_LOG_CONFIG_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_LOG_CONFIG_LDADD)
 EOF
     fi
   fi
@@ -20455,7 +21341,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_LOG_DEBUG_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_LOG_DEBUG_LDADD)
 EOF
     fi
   fi
@@ -20596,7 +21482,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_LOG_FORENSIC_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_LOG_FORENSIC_LDADD)
 EOF
     fi
   fi
@@ -20763,7 +21649,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_LOGIO_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_LOGIO_LDADD)
 EOF
     fi
   fi
@@ -22042,7 +22928,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_LUA_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_LUA_LDADD)
 EOF
     fi
   fi
@@ -22239,7 +23125,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_ENV_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_ENV_LDADD)
 EOF
     fi
   fi
@@ -22380,7 +23266,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_MIME_MAGIC_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_MIME_MAGIC_LDADD)
 EOF
     fi
   fi
@@ -22521,7 +23407,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CERN_META_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_CERN_META_LDADD)
 EOF
     fi
   fi
@@ -22662,7 +23548,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_EXPIRES_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_EXPIRES_LDADD)
 EOF
     fi
   fi
@@ -22803,7 +23689,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_HEADERS_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_HEADERS_LDADD)
 EOF
     fi
   fi
@@ -22944,7 +23830,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_IDENT_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_IDENT_LDADD)
 EOF
     fi
   fi
@@ -23123,7 +24009,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_USERTRACK_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_USERTRACK_LDADD)
 EOF
     fi
   fi
@@ -23265,7 +24151,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_UNIQUE_ID_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_UNIQUE_ID_LDADD)
 EOF
     fi
   fi
@@ -23406,7 +24292,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SETENVIF_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SETENVIF_LDADD)
 EOF
     fi
   fi
@@ -23547,7 +24433,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_VERSION_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_VERSION_LDADD)
 EOF
     fi
   fi
@@ -23688,7 +24574,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_REMOTEIP_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_REMOTEIP_LDADD)
 EOF
     fi
   fi
@@ -23863,7 +24749,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PROXY_LDADD)
 EOF
     fi
   fi
@@ -24063,7 +24949,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_CONNECT_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PROXY_CONNECT_LDADD)
 EOF
     fi
   fi
@@ -24225,7 +25111,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_FTP_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PROXY_FTP_LDADD)
 EOF
     fi
   fi
@@ -24387,7 +25273,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_HTTP_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PROXY_HTTP_LDADD)
 EOF
     fi
   fi
@@ -24549,7 +25435,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_FCGI_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PROXY_FCGI_LDADD)
 EOF
     fi
   fi
@@ -24711,7 +25597,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_SCGI_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PROXY_SCGI_LDADD)
 EOF
     fi
   fi
@@ -24873,7 +25759,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_UWSGI_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PROXY_UWSGI_LDADD)
 EOF
     fi
   fi
@@ -25050,7 +25936,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_FDPASS_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PROXY_FDPASS_LDADD)
 EOF
     fi
   fi
@@ -25212,7 +26098,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_WSTUNNEL_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PROXY_WSTUNNEL_LDADD)
 EOF
     fi
   fi
@@ -25374,7 +26260,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_AJP_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PROXY_AJP_LDADD)
 EOF
     fi
   fi
@@ -25536,7 +26422,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_BALANCER_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PROXY_BALANCER_LDADD)
 EOF
     fi
   fi
@@ -25699,7 +26585,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_EXPRESS_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PROXY_EXPRESS_LDADD)
 EOF
     fi
   fi
@@ -25869,7 +26755,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_HCHECK_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PROXY_HCHECK_LDADD)
 EOF
     fi
   fi
@@ -26091,7 +26977,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SESSION_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SESSION_LDADD)
 EOF
     fi
   fi
@@ -26253,7 +27139,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SESSION_COOKIE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SESSION_COOKIE_LDADD)
 EOF
     fi
   fi
@@ -26459,7 +27345,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SESSION_CRYPTO_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SESSION_CRYPTO_LDADD)
 EOF
     fi
   fi
@@ -26622,7 +27508,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SESSION_DBD_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SESSION_DBD_LDADD)
 EOF
     fi
   fi
@@ -26820,7 +27706,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SLOTMEM_SHM_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SLOTMEM_SHM_LDADD)
 EOF
     fi
   fi
@@ -26961,7 +27847,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SLOTMEM_PLAIN_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SLOTMEM_PLAIN_LDADD)
 EOF
     fi
   fi
@@ -27110,12 +27996,6 @@ $as_echo "$ap_openssl_base" >&6; }
     saved_LDFLAGS="$LDFLAGS"
 
         if test -n "$PKGCONFIG"; then
-      saved_PKG_CONFIG_PATH="$PKG_CONFIG_PATH"
-      if test "x$ap_openssl_base" != "x" -a \
-              -f "${ap_openssl_base}/lib/pkgconfig/openssl.pc"; then
-                        PKG_CONFIG_PATH="${ap_openssl_base}/lib/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-        export PKG_CONFIG_PATH
-      fi
       # Check whether --enable-ssl-staticlib-deps was given.
 if test "${enable_ssl_staticlib_deps+set}" = set; then :
   enableval=$enable_ssl_staticlib_deps;
@@ -27279,7 +28159,6 @@ fi
   fi
 
       fi
-      PKG_CONFIG_PATH="$saved_PKG_CONFIG_PATH"
     fi
 
         if test "x$ap_openssl_base" != "x" -a "x$ap_openssl_found" = "x"; then
@@ -27346,92 +28225,6 @@ fi
     done
   fi
 
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"-L$ap_openssl_base/lib\""
-    LDFLAGS="-L$ap_openssl_base/lib"
-  else
-    apr_addto_bugger="-L$ap_openssl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$MOD_LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting MOD_LDFLAGS to \"-L$ap_openssl_base/lib\""
-    MOD_LDFLAGS="-L$ap_openssl_base/lib"
-  else
-    apr_addto_bugger="-L$ap_openssl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $MOD_LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_LDFLAGS"
-        MOD_LDFLAGS="$MOD_LDFLAGS $i"
-      fi
-    done
-  fi
-
-      if test "x$ap_platform_runtime_link_flag" != "x"; then
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"$ap_platform_runtime_link_flag$ap_openssl_base/lib\""
-    LDFLAGS="$ap_platform_runtime_link_flag$ap_openssl_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_openssl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$MOD_LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting MOD_LDFLAGS to \"$ap_platform_runtime_link_flag$ap_openssl_base/lib\""
-    MOD_LDFLAGS="$ap_platform_runtime_link_flag$ap_openssl_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_openssl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $MOD_LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_LDFLAGS"
-        MOD_LDFLAGS="$MOD_LDFLAGS $i"
-      fi
-    done
-  fi
-
-      fi
     fi
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for OpenSSL version >= 0.9.8a" >&5
@@ -27744,7 +28537,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SSL_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SSL_LDADD)
 EOF
     fi
   fi
@@ -27942,7 +28735,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_OPTIONAL_HOOK_EXPORT_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_OPTIONAL_HOOK_EXPORT_LDADD)
 EOF
     fi
   fi
@@ -28083,7 +28876,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_OPTIONAL_HOOK_IMPORT_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_OPTIONAL_HOOK_IMPORT_LDADD)
 EOF
     fi
   fi
@@ -28224,7 +29017,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_OPTIONAL_FN_IMPORT_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_OPTIONAL_FN_IMPORT_LDADD)
 EOF
     fi
   fi
@@ -28365,7 +29158,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_OPTIONAL_FN_EXPORT_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_OPTIONAL_FN_EXPORT_LDADD)
 EOF
     fi
   fi
@@ -28507,7 +29300,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DIALUP_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_DIALUP_LDADD)
 EOF
     fi
   fi
@@ -29974,12 +30767,6 @@ $as_echo "$ap_openssl_base" >&6; }
     saved_LDFLAGS="$LDFLAGS"
 
         if test -n "$PKGCONFIG"; then
-      saved_PKG_CONFIG_PATH="$PKG_CONFIG_PATH"
-      if test "x$ap_openssl_base" != "x" -a \
-              -f "${ap_openssl_base}/lib/pkgconfig/openssl.pc"; then
-                        PKG_CONFIG_PATH="${ap_openssl_base}/lib/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-        export PKG_CONFIG_PATH
-      fi
       # Check whether --enable-ssl-staticlib-deps was given.
 if test "${enable_ssl_staticlib_deps+set}" = set; then :
   enableval=$enable_ssl_staticlib_deps;
@@ -30143,7 +30930,6 @@ fi
   fi
 
       fi
-      PKG_CONFIG_PATH="$saved_PKG_CONFIG_PATH"
     fi
 
         if test "x$ap_openssl_base" != "x" -a "x$ap_openssl_found" = "x"; then
@@ -30210,92 +30996,6 @@ fi
     done
   fi
 
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"-L$ap_openssl_base/lib\""
-    LDFLAGS="-L$ap_openssl_base/lib"
-  else
-    apr_addto_bugger="-L$ap_openssl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$MOD_LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting MOD_LDFLAGS to \"-L$ap_openssl_base/lib\""
-    MOD_LDFLAGS="-L$ap_openssl_base/lib"
-  else
-    apr_addto_bugger="-L$ap_openssl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $MOD_LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_LDFLAGS"
-        MOD_LDFLAGS="$MOD_LDFLAGS $i"
-      fi
-    done
-  fi
-
-      if test "x$ap_platform_runtime_link_flag" != "x"; then
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"$ap_platform_runtime_link_flag$ap_openssl_base/lib\""
-    LDFLAGS="$ap_platform_runtime_link_flag$ap_openssl_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_openssl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$MOD_LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting MOD_LDFLAGS to \"$ap_platform_runtime_link_flag$ap_openssl_base/lib\""
-    MOD_LDFLAGS="$ap_platform_runtime_link_flag$ap_openssl_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_openssl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $MOD_LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_LDFLAGS"
-        MOD_LDFLAGS="$MOD_LDFLAGS $i"
-      fi
-    done
-  fi
-
-      fi
     fi
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for OpenSSL version >= 0.9.8a" >&5
@@ -30561,18 +31261,6 @@ $as_echo "$ap_nghttp2_base" >&6; }
     saved_LDFLAGS="$LDFLAGS"
 
         if test -n "$PKGCONFIG"; then
-      saved_PKG_CONFIG_PATH="$PKG_CONFIG_PATH"
-      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pkg-config along $PKG_CONFIG_PATH" >&5
-$as_echo_n "checking for pkg-config along $PKG_CONFIG_PATH... " >&6; }
-      if test "x$ap_nghttp2_base" != "x" ; then
-        if test -f "${ap_nghttp2_base}/lib/pkgconfig/libnghttp2.pc"; then
-                              PKG_CONFIG_PATH="${ap_nghttp2_base}/lib/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-          export PKG_CONFIG_PATH
-        elif test -f "${ap_nghttp2_base}/lib64/pkgconfig/libnghttp2.pc"; then
-                              PKG_CONFIG_PATH="${ap_nghttp2_base}/lib64/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-          export PKG_CONFIG_PATH
-        fi
-      fi
       # Check whether --enable-nghttp2-staticlib-deps was given.
 if test "${enable_nghttp2_staticlib_deps+set}" = set; then :
   enableval=$enable_nghttp2_staticlib_deps;
@@ -30715,7 +31403,6 @@ fi
   fi
 
       fi
-      PKG_CONFIG_PATH="$saved_PKG_CONFIG_PATH"
     fi
 
         if test "x$ap_nghttp2_base" != "x" -a "x$ap_nghttp2_found" = "x"; then
@@ -30761,92 +31448,6 @@ fi
     done
   fi
 
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"-L$ap_nghttp2_base/lib\""
-    LDFLAGS="-L$ap_nghttp2_base/lib"
-  else
-    apr_addto_bugger="-L$ap_nghttp2_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$MOD_LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting MOD_LDFLAGS to \"-L$ap_nghttp2_base/lib\""
-    MOD_LDFLAGS="-L$ap_nghttp2_base/lib"
-  else
-    apr_addto_bugger="-L$ap_nghttp2_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $MOD_LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_LDFLAGS"
-        MOD_LDFLAGS="$MOD_LDFLAGS $i"
-      fi
-    done
-  fi
-
-      if test "x$ap_platform_runtime_link_flag" != "x"; then
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"$ap_platform_runtime_link_flag$ap_nghttp2_base/lib\""
-    LDFLAGS="$ap_platform_runtime_link_flag$ap_nghttp2_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_nghttp2_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$MOD_LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting MOD_LDFLAGS to \"$ap_platform_runtime_link_flag$ap_nghttp2_base/lib\""
-    MOD_LDFLAGS="$ap_platform_runtime_link_flag$ap_nghttp2_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_nghttp2_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $MOD_LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_LDFLAGS"
-        MOD_LDFLAGS="$MOD_LDFLAGS $i"
-      fi
-    done
-  fi
-
-      fi
     fi
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for nghttp2 version >= 1.2.1" >&5
@@ -31189,7 +31790,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_HTTP2_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_HTTP2_LDADD)
 EOF
     fi
   fi
@@ -31319,18 +31920,6 @@ $as_echo "$ap_nghttp2_base" >&6; }
     saved_LDFLAGS="$LDFLAGS"
 
         if test -n "$PKGCONFIG"; then
-      saved_PKG_CONFIG_PATH="$PKG_CONFIG_PATH"
-      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pkg-config along $PKG_CONFIG_PATH" >&5
-$as_echo_n "checking for pkg-config along $PKG_CONFIG_PATH... " >&6; }
-      if test "x$ap_nghttp2_base" != "x" ; then
-        if test -f "${ap_nghttp2_base}/lib/pkgconfig/libnghttp2.pc"; then
-                              PKG_CONFIG_PATH="${ap_nghttp2_base}/lib/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-          export PKG_CONFIG_PATH
-        elif test -f "${ap_nghttp2_base}/lib64/pkgconfig/libnghttp2.pc"; then
-                              PKG_CONFIG_PATH="${ap_nghttp2_base}/lib64/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-          export PKG_CONFIG_PATH
-        fi
-      fi
       # Check whether --enable-nghttp2-staticlib-deps was given.
 if test "${enable_nghttp2_staticlib_deps+set}" = set; then :
   enableval=$enable_nghttp2_staticlib_deps;
@@ -31473,7 +32062,6 @@ fi
   fi
 
       fi
-      PKG_CONFIG_PATH="$saved_PKG_CONFIG_PATH"
     fi
 
         if test "x$ap_nghttp2_base" != "x" -a "x$ap_nghttp2_found" = "x"; then
@@ -31519,92 +32107,6 @@ fi
     done
   fi
 
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"-L$ap_nghttp2_base/lib\""
-    LDFLAGS="-L$ap_nghttp2_base/lib"
-  else
-    apr_addto_bugger="-L$ap_nghttp2_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$MOD_LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting MOD_LDFLAGS to \"-L$ap_nghttp2_base/lib\""
-    MOD_LDFLAGS="-L$ap_nghttp2_base/lib"
-  else
-    apr_addto_bugger="-L$ap_nghttp2_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $MOD_LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_LDFLAGS"
-        MOD_LDFLAGS="$MOD_LDFLAGS $i"
-      fi
-    done
-  fi
-
-      if test "x$ap_platform_runtime_link_flag" != "x"; then
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"$ap_platform_runtime_link_flag$ap_nghttp2_base/lib\""
-    LDFLAGS="$ap_platform_runtime_link_flag$ap_nghttp2_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_nghttp2_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$MOD_LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting MOD_LDFLAGS to \"$ap_platform_runtime_link_flag$ap_nghttp2_base/lib\""
-    MOD_LDFLAGS="$ap_platform_runtime_link_flag$ap_nghttp2_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_nghttp2_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $MOD_LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_LDFLAGS"
-        MOD_LDFLAGS="$MOD_LDFLAGS $i"
-      fi
-    done
-  fi
-
-      fi
     fi
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for nghttp2 version >= 1.2.1" >&5
@@ -31947,7 +32449,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_HTTP2_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PROXY_HTTP2_LDADD)
 EOF
     fi
   fi
@@ -32128,12 +32630,6 @@ $as_echo "$ap_openssl_base" >&6; }
     saved_LDFLAGS="$LDFLAGS"
 
         if test -n "$PKGCONFIG"; then
-      saved_PKG_CONFIG_PATH="$PKG_CONFIG_PATH"
-      if test "x$ap_openssl_base" != "x" -a \
-              -f "${ap_openssl_base}/lib/pkgconfig/openssl.pc"; then
-                        PKG_CONFIG_PATH="${ap_openssl_base}/lib/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-        export PKG_CONFIG_PATH
-      fi
       # Check whether --enable-ssl-staticlib-deps was given.
 if test "${enable_ssl_staticlib_deps+set}" = set; then :
   enableval=$enable_ssl_staticlib_deps;
@@ -32297,7 +32793,6 @@ fi
   fi
 
       fi
-      PKG_CONFIG_PATH="$saved_PKG_CONFIG_PATH"
     fi
 
         if test "x$ap_openssl_base" != "x" -a "x$ap_openssl_found" = "x"; then
@@ -32364,92 +32859,6 @@ fi
     done
   fi
 
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"-L$ap_openssl_base/lib\""
-    LDFLAGS="-L$ap_openssl_base/lib"
-  else
-    apr_addto_bugger="-L$ap_openssl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$MOD_LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting MOD_LDFLAGS to \"-L$ap_openssl_base/lib\""
-    MOD_LDFLAGS="-L$ap_openssl_base/lib"
-  else
-    apr_addto_bugger="-L$ap_openssl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $MOD_LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_LDFLAGS"
-        MOD_LDFLAGS="$MOD_LDFLAGS $i"
-      fi
-    done
-  fi
-
-      if test "x$ap_platform_runtime_link_flag" != "x"; then
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"$ap_platform_runtime_link_flag$ap_openssl_base/lib\""
-    LDFLAGS="$ap_platform_runtime_link_flag$ap_openssl_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_openssl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$MOD_LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting MOD_LDFLAGS to \"$ap_platform_runtime_link_flag$ap_openssl_base/lib\""
-    MOD_LDFLAGS="$ap_platform_runtime_link_flag$ap_openssl_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_openssl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $MOD_LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_LDFLAGS"
-        MOD_LDFLAGS="$MOD_LDFLAGS $i"
-      fi
-    done
-  fi
-
-      fi
     fi
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for OpenSSL version >= 0.9.8a" >&5
@@ -32697,18 +33106,6 @@ $as_echo "$ap_jansson_base" >&6; }
     saved_LDFLAGS="$LDFLAGS"
 
         if test -n "$PKGCONFIG"; then
-      saved_PKG_CONFIG_PATH="$PKG_CONFIG_PATH"
-      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pkg-config along $PKG_CONFIG_PATH" >&5
-$as_echo_n "checking for pkg-config along $PKG_CONFIG_PATH... " >&6; }
-      if test "x$ap_jansson_base" != "x" ; then
-        if test -f "${ap_jansson_base}/lib/pkgconfig/libjansson.pc"; then
-                              PKG_CONFIG_PATH="${ap_jansson_base}/lib/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-          export PKG_CONFIG_PATH
-        elif test -f "${ap_jansson_base}/lib64/pkgconfig/libjansson.pc"; then
-                              PKG_CONFIG_PATH="${ap_jansson_base}/lib64/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-          export PKG_CONFIG_PATH
-        fi
-      fi
       # Check whether --enable-jansson-staticlib-deps was given.
 if test "${enable_jansson_staticlib_deps+set}" = set; then :
   enableval=$enable_jansson_staticlib_deps;
@@ -32851,7 +33248,6 @@ fi
   fi
 
       fi
-      PKG_CONFIG_PATH="$saved_PKG_CONFIG_PATH"
     fi
 
         if test "x$ap_jansson_base" != "x" -a "x$ap_jansson_found" = "x"; then
@@ -32897,92 +33293,6 @@ fi
     done
   fi
 
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"-L$ap_jansson_base/lib\""
-    LDFLAGS="-L$ap_jansson_base/lib"
-  else
-    apr_addto_bugger="-L$ap_jansson_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$MOD_LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting MOD_LDFLAGS to \"-L$ap_jansson_base/lib\""
-    MOD_LDFLAGS="-L$ap_jansson_base/lib"
-  else
-    apr_addto_bugger="-L$ap_jansson_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $MOD_LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_LDFLAGS"
-        MOD_LDFLAGS="$MOD_LDFLAGS $i"
-      fi
-    done
-  fi
-
-      if test "x$ap_platform_runtime_link_flag" != "x"; then
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"$ap_platform_runtime_link_flag$ap_jansson_base/lib\""
-    LDFLAGS="$ap_platform_runtime_link_flag$ap_jansson_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_jansson_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$MOD_LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting MOD_LDFLAGS to \"$ap_platform_runtime_link_flag$ap_jansson_base/lib\""
-    MOD_LDFLAGS="$ap_platform_runtime_link_flag$ap_jansson_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_jansson_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $MOD_LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_LDFLAGS"
-        MOD_LDFLAGS="$MOD_LDFLAGS $i"
-      fi
-    done
-  fi
-
-      fi
     fi
 
     # attempts to include jansson.h fail me. So lets make sure we can at least
@@ -33110,18 +33420,6 @@ $as_echo "$ap_curl_base" >&6; }
     saved_LDFLAGS="$LDFLAGS"
 
         if test -n "$PKGCONFIG"; then
-      saved_PKG_CONFIG_PATH="$PKG_CONFIG_PATH"
-      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pkg-config along $PKG_CONFIG_PATH" >&5
-$as_echo_n "checking for pkg-config along $PKG_CONFIG_PATH... " >&6; }
-      if test "x$ap_curl_base" != "x" ; then
-        if test -f "${ap_curl_base}/lib/pkgconfig/libcurl.pc"; then
-                              PKG_CONFIG_PATH="${ap_curl_base}/lib/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-          export PKG_CONFIG_PATH
-        elif test -f "${ap_curl_base}/lib64/pkgconfig/libcurl.pc"; then
-                              PKG_CONFIG_PATH="${ap_curl_base}/lib64/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-          export PKG_CONFIG_PATH
-        fi
-      fi
       # Check whether --enable-curl-staticlib-deps was given.
 if test "${enable_curl_staticlib_deps+set}" = set; then :
   enableval=$enable_curl_staticlib_deps;
@@ -33264,7 +33562,6 @@ fi
   fi
 
       fi
-      PKG_CONFIG_PATH="$saved_PKG_CONFIG_PATH"
     fi
 
         if test "x$ap_curl_base" != "x" -a "x$ap_curl_found" = "x"; then
@@ -33310,92 +33607,6 @@ fi
     done
   fi
 
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"-L$ap_curl_base/lib\""
-    LDFLAGS="-L$ap_curl_base/lib"
-  else
-    apr_addto_bugger="-L$ap_curl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$MOD_LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting MOD_LDFLAGS to \"-L$ap_curl_base/lib\""
-    MOD_LDFLAGS="-L$ap_curl_base/lib"
-  else
-    apr_addto_bugger="-L$ap_curl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $MOD_LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_LDFLAGS"
-        MOD_LDFLAGS="$MOD_LDFLAGS $i"
-      fi
-    done
-  fi
-
-      if test "x$ap_platform_runtime_link_flag" != "x"; then
-
-  if test "x$LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"$ap_platform_runtime_link_flag$ap_curl_base/lib\""
-    LDFLAGS="$ap_platform_runtime_link_flag$ap_curl_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_curl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
-        LDFLAGS="$LDFLAGS $i"
-      fi
-    done
-  fi
-
-
-  if test "x$MOD_LDFLAGS" = "x"; then
-    test "x$silent" != "xyes" && echo "  setting MOD_LDFLAGS to \"$ap_platform_runtime_link_flag$ap_curl_base/lib\""
-    MOD_LDFLAGS="$ap_platform_runtime_link_flag$ap_curl_base/lib"
-  else
-    apr_addto_bugger="$ap_platform_runtime_link_flag$ap_curl_base/lib"
-    for i in $apr_addto_bugger; do
-      apr_addto_duplicate="0"
-      for j in $MOD_LDFLAGS; do
-        if test "x$i" = "x$j"; then
-          apr_addto_duplicate="1"
-          break
-        fi
-      done
-      if test $apr_addto_duplicate = "0"; then
-        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_LDFLAGS"
-        MOD_LDFLAGS="$MOD_LDFLAGS $i"
-      fi
-    done
-  fi
-
-      fi
     fi
 
     for ac_header in curl/curl.h
@@ -33642,7 +33853,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_MD_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_MD_LDADD)
 EOF
     fi
   fi
@@ -33837,7 +34048,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_LBMETHOD_BYREQUESTS_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_LBMETHOD_BYREQUESTS_LDADD)
 EOF
     fi
   fi
@@ -33999,7 +34210,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_LBMETHOD_BYTRAFFIC_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_LBMETHOD_BYTRAFFIC_LDADD)
 EOF
     fi
   fi
@@ -34161,7 +34372,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_LBMETHOD_BYBUSYNESS_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_LBMETHOD_BYBUSYNESS_LDADD)
 EOF
     fi
   fi
@@ -34323,7 +34534,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_LBMETHOD_HEARTBEAT_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_LBMETHOD_HEARTBEAT_LDADD)
 EOF
     fi
   fi
@@ -34546,7 +34757,7 @@ EOF
             shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
             cat >$mpmpath/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version $objects \$(MOD_MPM_EVENT_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version $objects \$(MOD_MPM_EVENT_LDADD)
 DISTCLEAN_TARGETS = modules.mk
 static =
 shared = $libname
@@ -34629,7 +34840,7 @@ EOF
             shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
             cat >$mpmpath/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version $objects
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version $objects
 DISTCLEAN_TARGETS = modules.mk
 static =
 shared = $libname
@@ -34701,7 +34912,7 @@ EOF
             shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
             cat >$mpmpath/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version $objects
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version $objects
 DISTCLEAN_TARGETS = modules.mk
 static =
 shared = $libname
@@ -34773,7 +34984,7 @@ EOF
             shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
             cat >$mpmpath/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version $objects
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version $objects
 DISTCLEAN_TARGETS = modules.mk
 static =
 shared = $libname
@@ -34950,7 +35161,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_UNIXD_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_UNIXD_LDADD)
 EOF
     fi
   fi
@@ -35124,7 +35335,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PRIVILEGES_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_PRIVILEGES_LDADD)
 EOF
     fi
   fi
@@ -35307,7 +35518,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SYSTEMD_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SYSTEMD_LDADD)
 EOF
     fi
   fi
@@ -35535,7 +35746,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_HEARTBEAT_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_HEARTBEAT_LDADD)
 EOF
     fi
   fi
@@ -35676,7 +35887,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_HEARTMONITOR_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_HEARTMONITOR_LDADD)
 EOF
     fi
   fi
@@ -35858,7 +36069,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DAV_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_DAV_LDADD)
 EOF
     fi
   fi
@@ -36059,7 +36270,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_STATUS_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_STATUS_LDADD)
 EOF
     fi
   fi
@@ -36200,7 +36411,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTOINDEX_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_AUTOINDEX_LDADD)
 EOF
     fi
   fi
@@ -36341,7 +36552,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_ASIS_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_ASIS_LDADD)
 EOF
     fi
   fi
@@ -36482,7 +36693,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_INFO_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_INFO_LDADD)
 EOF
     fi
   fi
@@ -36637,7 +36848,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SUEXEC_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SUEXEC_LDADD)
 EOF
     fi
   fi
@@ -36844,7 +37055,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CGID_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_CGID_LDADD)
 EOF
     fi
   fi
@@ -36985,7 +37196,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CGI_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_CGI_LDADD)
 EOF
     fi
   fi
@@ -37127,7 +37338,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CGI_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_CGI_LDADD)
 EOF
     fi
   fi
@@ -37268,7 +37479,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CGID_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_CGID_LDADD)
 EOF
     fi
   fi
@@ -37379,7 +37590,7 @@ EOF
             shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
             cat >$mpmpath/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version $objects
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version $objects
 DISTCLEAN_TARGETS = modules.mk
 static =
 shared = $libname
@@ -37595,7 +37806,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DAV_FS_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_DAV_FS_LDADD)
 EOF
     fi
   fi
@@ -37800,7 +38011,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DAV_LOCK_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_DAV_LOCK_LDADD)
 EOF
     fi
   fi
@@ -38040,7 +38251,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_VHOST_ALIAS_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_VHOST_ALIAS_LDADD)
 EOF
     fi
   fi
@@ -38181,7 +38392,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_NEGOTIATION_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_NEGOTIATION_LDADD)
 EOF
     fi
   fi
@@ -38322,7 +38533,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DIR_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_DIR_LDADD)
 EOF
     fi
   fi
@@ -38463,7 +38674,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_IMAGEMAP_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_IMAGEMAP_LDADD)
 EOF
     fi
   fi
@@ -38604,7 +38815,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_ACTIONS_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_ACTIONS_LDADD)
 EOF
     fi
   fi
@@ -38745,7 +38956,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SPELING_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_SPELING_LDADD)
 EOF
     fi
   fi
@@ -38886,7 +39097,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_USERDIR_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_USERDIR_LDADD)
 EOF
     fi
   fi
@@ -39027,7 +39238,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_ALIAS_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_ALIAS_LDADD)
 EOF
     fi
   fi
@@ -39168,7 +39379,7 @@ EOF
       modpath_shared="$modpath_shared $libname"
       cat >>$modpath_current/modules.mk<<EOF
 $libname: $shobjects
-	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_REWRITE_LDADD)
+	\$(SH_LINK) -rpath \$(libexecdir) -Wl,--unresolved-symbols=ignore-all -module -avoid-version  $objects \$(MOD_REWRITE_LDADD)
 EOF
     fi
   fi
@@ -39565,9 +39776,9 @@ fi
 
 
 if test x${apu_found} != xobsolete; then
-  AP_LIBS="$AP_LIBS `$apu_config --avoid-ldap --link-libtool --libs`"
+  AP_LIBS="$AP_LIBS `$apu_config --avoid-ldap --link-ld`"
 fi
-AP_LIBS="$AP_LIBS `$apr_config --link-libtool --libs`"
+AP_LIBS="$AP_LIBS `$apr_config --link-ld`"
 
   APACHE_VAR_SUBST="$APACHE_VAR_SUBST AP_LIBS"
 
@@ -40727,9 +40938,9 @@ esac
 
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 # Files that config.status was made for.
-config_files="$ac_config_files"
-config_headers="$ac_config_headers"
-config_commands="$ac_config_commands"
+config_files="`echo $ac_config_files`"
+config_headers="`echo $ac_config_headers`"
+config_commands="`echo $ac_config_commands`"
 
 _ACEOF
 
diff -up httpd-2.4.43/modules/cache/config.m4.Lusrlib~ httpd-2.4.43/modules/cache/config.m4
--- httpd-2.4.43/modules/cache/config.m4.Lusrlib~	2020-05-29 16:53:21.969668423 +0200
+++ httpd-2.4.43/modules/cache/config.m4	2020-05-29 16:53:21.970668433 +0200
@@ -67,12 +67,6 @@ if test "x$ap_distcache_configured" = "x
   if test "x$ap_distcache_base" != "x"; then
     APR_ADDTO(CPPFLAGS, [-I$ap_distcache_base/include])
     APR_ADDTO(MOD_INCLUDES, [-I$ap_distcache_base/include])
-    APR_ADDTO(LDFLAGS, [-L$ap_distcache_base/lib])
-    APR_ADDTO(ap_distcache_ldflags, [-L$ap_distcache_base/lib])
-    if test "x$ap_platform_runtime_link_flag" != "x"; then
-      APR_ADDTO(LDFLAGS, [$ap_platform_runtime_link_flag$ap_distcache_base/lib])
-      APR_ADDTO(ap_distcache_ldflags, [$ap_platform_runtime_link_flag$ap_distcache_base/lib])
-    fi
   fi
   dnl First check for mandatory headers
   AC_CHECK_HEADERS([distcache/dc_client.h], [ap_distcache_found="yes"], [])
diff -up httpd-2.4.43/modules/filters/config.m4.Lusrlib~ httpd-2.4.43/modules/filters/config.m4
--- httpd-2.4.43/modules/filters/config.m4.Lusrlib~	2020-05-29 16:53:21.886667543 +0200
+++ httpd-2.4.43/modules/filters/config.m4	2020-05-29 16:53:21.889667575 +0200
@@ -69,12 +69,6 @@ APACHE_MODULE(deflate, Deflate transfer
       APR_ADDTO(MOD_INCLUDES, [-I${ap_zlib_base}/include])
       dnl put in CPPFLAGS temporarily so that AC_TRY_LINK below will work
       CPPFLAGS="$CPPFLAGS $INCLUDES"
-      APR_ADDTO(LDFLAGS, [-L${ap_zlib_base}/lib])
-      APR_ADDTO(ap_zlib_ldflags, [-L${ap_zlib_base}/lib])
-      if test "x$ap_platform_runtime_link_flag" != "x"; then
-         APR_ADDTO(LDFLAGS, [$ap_platform_runtime_link_flag${ap_zlib_base}/lib])
-         APR_ADDTO(ap_zlib_ldflags, [$ap_platform_runtime_link_flag${ap_zlib_base}/lib])
-      fi
     fi
     APR_ADDTO(LIBS, [-lz])
     AC_MSG_CHECKING([for zlib library])
@@ -159,7 +153,7 @@ if (o) return *o;],
       [AC_MSG_RESULT(yes)
        ap_brotli_found=yes
        ap_brotli_cflags="-I${ap_brotli_base}/include"
-       ap_brotli_libs="-L${ap_brotli_base}/lib -lbrotlienc -lbrotlicommon"],
+       ap_brotli_libs="-lbrotlienc -lbrotlicommon"],
       [AC_MSG_RESULT(no)]
     )
     CPPFLAGS=$ap_save_cppflags
diff -up httpd-2.4.43/modules/http2/config2.m4.Lusrlib~ httpd-2.4.43/modules/http2/config2.m4
--- httpd-2.4.43/modules/http2/config2.m4.Lusrlib~	2020-05-29 16:53:21.936668073 +0200
+++ httpd-2.4.43/modules/http2/config2.m4	2020-05-29 16:53:21.933668041 +0200
@@ -77,21 +77,6 @@ AC_DEFUN([APACHE_CHECK_NGHTTP2],[
 
     dnl Before doing anything else, load in pkg-config variables
     if test -n "$PKGCONFIG"; then
-      saved_PKG_CONFIG_PATH="$PKG_CONFIG_PATH"
-      AC_MSG_CHECKING([for pkg-config along $PKG_CONFIG_PATH])
-      if test "x$ap_nghttp2_base" != "x" ; then
-        if test -f "${ap_nghttp2_base}/lib/pkgconfig/libnghttp2.pc"; then
-          dnl Ensure that the given path is used by pkg-config too, otherwise
-          dnl the system libnghttp2.pc might be picked up instead.
-          PKG_CONFIG_PATH="${ap_nghttp2_base}/lib/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-          export PKG_CONFIG_PATH
-        elif test -f "${ap_nghttp2_base}/lib64/pkgconfig/libnghttp2.pc"; then
-          dnl Ensure that the given path is used by pkg-config too, otherwise
-          dnl the system libnghttp2.pc might be picked up instead.
-          PKG_CONFIG_PATH="${ap_nghttp2_base}/lib64/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-          export PKG_CONFIG_PATH
-        fi
-      fi
       AC_ARG_ENABLE(nghttp2-staticlib-deps,APACHE_HELP_STRING(--enable-nghttp2-staticlib-deps,[link mod_http2 with dependencies of libnghttp2's static libraries (as indicated by "pkg-config --static"). Must be specified in addition to --enable-http2.]), [
         if test "$enableval" = "yes"; then
           PKGCONFIG_LIBOPTS="--static"
@@ -110,19 +95,12 @@ AC_DEFUN([APACHE_CHECK_NGHTTP2],[
         APR_ADDTO(LDFLAGS, [$pkglookup])
         APR_ADDTO(MOD_LDFLAGS, [$pkglookup])
       fi
-      PKG_CONFIG_PATH="$saved_PKG_CONFIG_PATH"
     fi
 
     dnl fall back to the user-supplied directory if not found via pkg-config
     if test "x$ap_nghttp2_base" != "x" -a "x$ap_nghttp2_found" = "x"; then
       APR_ADDTO(CPPFLAGS, [-I$ap_nghttp2_base/include])
       APR_ADDTO(MOD_CFLAGS, [-I$ap_nghttp2_base/include])
-      APR_ADDTO(LDFLAGS, [-L$ap_nghttp2_base/lib])
-      APR_ADDTO(MOD_LDFLAGS, [-L$ap_nghttp2_base/lib])
-      if test "x$ap_platform_runtime_link_flag" != "x"; then
-        APR_ADDTO(LDFLAGS, [$ap_platform_runtime_link_flag$ap_nghttp2_base/lib])
-        APR_ADDTO(MOD_LDFLAGS, [$ap_platform_runtime_link_flag$ap_nghttp2_base/lib])
-      fi
     fi
 
     AC_MSG_CHECKING([for nghttp2 version >= 1.2.1])
diff -up httpd-2.4.43/modules/md/config2.m4.Lusrlib~ httpd-2.4.43/modules/md/config2.m4
--- httpd-2.4.43/modules/md/config2.m4.Lusrlib~	2020-05-29 16:53:21.919667893 +0200
+++ httpd-2.4.43/modules/md/config2.m4	2020-05-29 16:53:21.917667872 +0200
@@ -49,21 +49,6 @@ AC_DEFUN([APACHE_CHECK_CURL],[
 
     dnl Before doing anything else, load in pkg-config variables
     if test -n "$PKGCONFIG"; then
-      saved_PKG_CONFIG_PATH="$PKG_CONFIG_PATH"
-      AC_MSG_CHECKING([for pkg-config along $PKG_CONFIG_PATH])
-      if test "x$ap_curl_base" != "x" ; then
-        if test -f "${ap_curl_base}/lib/pkgconfig/libcurl.pc"; then
-          dnl Ensure that the given path is used by pkg-config too, otherwise
-          dnl the system libcurl.pc might be picked up instead.
-          PKG_CONFIG_PATH="${ap_curl_base}/lib/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-          export PKG_CONFIG_PATH
-        elif test -f "${ap_curl_base}/lib64/pkgconfig/libcurl.pc"; then
-          dnl Ensure that the given path is used by pkg-config too, otherwise
-          dnl the system libcurl.pc might be picked up instead.
-          PKG_CONFIG_PATH="${ap_curl_base}/lib64/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-          export PKG_CONFIG_PATH
-        fi
-      fi
       AC_ARG_ENABLE(curl-staticlib-deps,APACHE_HELP_STRING(--enable-curl-staticlib-deps,[link mod_md with dependencies of libcurl's static libraries (as indicated by "pkg-config --static"). Must be specified in addition to --enable-md.]), [
         if test "$enableval" = "yes"; then
           PKGCONFIG_LIBOPTS="--static"
@@ -82,19 +67,12 @@ AC_DEFUN([APACHE_CHECK_CURL],[
         APR_ADDTO(LDFLAGS, [$pkglookup])
         APR_ADDTO(MOD_LDFLAGS, [$pkglookup])
       fi
-      PKG_CONFIG_PATH="$saved_PKG_CONFIG_PATH"
     fi
 
     dnl fall back to the user-supplied directory if not found via pkg-config
     if test "x$ap_curl_base" != "x" -a "x$ap_curl_found" = "x"; then
       APR_ADDTO(CPPFLAGS, [-I$ap_curl_base/include])
       APR_ADDTO(MOD_CFLAGS, [-I$ap_curl_base/include])
-      APR_ADDTO(LDFLAGS, [-L$ap_curl_base/lib])
-      APR_ADDTO(MOD_LDFLAGS, [-L$ap_curl_base/lib])
-      if test "x$ap_platform_runtime_link_flag" != "x"; then
-        APR_ADDTO(LDFLAGS, [$ap_platform_runtime_link_flag$ap_curl_base/lib])
-        APR_ADDTO(MOD_LDFLAGS, [$ap_platform_runtime_link_flag$ap_curl_base/lib])
-      fi
     fi
 
     AC_CHECK_HEADERS([curl/curl.h])
@@ -167,21 +145,6 @@ AC_DEFUN([APACHE_CHECK_JANSSON],[
 
     dnl Before doing anything else, load in pkg-config variables
     if test -n "$PKGCONFIG"; then
-      saved_PKG_CONFIG_PATH="$PKG_CONFIG_PATH"
-      AC_MSG_CHECKING([for pkg-config along $PKG_CONFIG_PATH])
-      if test "x$ap_jansson_base" != "x" ; then
-        if test -f "${ap_jansson_base}/lib/pkgconfig/libjansson.pc"; then
-          dnl Ensure that the given path is used by pkg-config too, otherwise
-          dnl the system libjansson.pc might be picked up instead.
-          PKG_CONFIG_PATH="${ap_jansson_base}/lib/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-          export PKG_CONFIG_PATH
-        elif test -f "${ap_jansson_base}/lib64/pkgconfig/libjansson.pc"; then
-          dnl Ensure that the given path is used by pkg-config too, otherwise
-          dnl the system libjansson.pc might be picked up instead.
-          PKG_CONFIG_PATH="${ap_jansson_base}/lib64/pkgconfig${PKG_CONFIG_PATH+:}${PKG_CONFIG_PATH}"
-          export PKG_CONFIG_PATH
-        fi
-      fi
       AC_ARG_ENABLE(jansson-staticlib-deps,APACHE_HELP_STRING(--enable-jansson-staticlib-deps,[link mod_md with dependencies of libjansson's static libraries (as indicated by "pkg-config --static"). Must be specified in addition to --enable-md.]), [
         if test "$enableval" = "yes"; then
           PKGCONFIG_LIBOPTS="--static"
@@ -200,19 +163,12 @@ AC_DEFUN([APACHE_CHECK_JANSSON],[
         APR_ADDTO(LDFLAGS, [$pkglookup])
         APR_ADDTO(MOD_LDFLAGS, [$pkglookup])
       fi
-      PKG_CONFIG_PATH="$saved_PKG_CONFIG_PATH"
     fi
 
     dnl fall back to the user-supplied directory if not found via pkg-config
     if test "x$ap_jansson_base" != "x" -a "x$ap_jansson_found" = "x"; then
       APR_ADDTO(CPPFLAGS, [-I$ap_jansson_base/include])
       APR_ADDTO(MOD_CFLAGS, [-I$ap_jansson_base/include])
-      APR_ADDTO(LDFLAGS, [-L$ap_jansson_base/lib])
-      APR_ADDTO(MOD_LDFLAGS, [-L$ap_jansson_base/lib])
-      if test "x$ap_platform_runtime_link_flag" != "x"; then
-        APR_ADDTO(LDFLAGS, [$ap_platform_runtime_link_flag$ap_jansson_base/lib])
-        APR_ADDTO(MOD_LDFLAGS, [$ap_platform_runtime_link_flag$ap_jansson_base/lib])
-      fi
     fi
 
     # attempts to include jansson.h fail me. So lets make sure we can at least
